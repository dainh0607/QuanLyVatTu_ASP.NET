@using QuanLyVatTu_ASP.Repositories
@using QuanLyVatTu_ASP.Extensions
@using QuanLyVatTu_ASP.Models.ViewModels
@inject IUnitOfWork _unitOfWork
@{
    var _layoutCategories = await _unitOfWork.LoaiVatTuRepository.GetAllAsync();
    
    // Lấy dữ liệu giỏ hàng từ session
    var _cart = Context.Session.Get<List<CartItem>>("MY_CART") ?? new List<CartItem>();
    var _cartCount = _cart.Sum(x => x.SoLuong);
    var _cartTotal = _cart.Sum(x => x.ThanhTien);
    
    // Lấy dữ liệu wishlist
    var _wishlist = Context.Session.Get<List<WishlistItem>>("WISHLIST") ?? new List<WishlistItem>();
    var _wishlistCount = _wishlist.Count;
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Cửa hàng vật tư</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/user/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/user/css/Layout_Customer.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/user/css/cart-dropdown.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/user/css/reviews.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
<header class="main-header">
    <div class="top-header py-3">
        <div class="container d-flex align-items-center justify-content-between">
            
            <div class="logo">
                <a href="/">
                    <span class="logo-icon">FN</span>
                    <span>Cửa hàng vật tư</span>
                </a>
            </div>

            <div class="search-box-wrapper">
                <form action="/Search" method="get" class="search-form">
                    <input type="text" name="q" placeholder="Tìm kiếm sản phẩm..." class="search-input" />
                    <button type="submit" class="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </form>
            </div>

            
            <div class="header-actions">
                <a href="/GioHang/Wishlist" class="icon-btn">
                    <i class="fa-regular fa-heart"></i>
                    <span class="badge-count">@(_wishlistCount)</span>
                </a>
                <div class="cart-dropdown-wrapper">
                            <a href="/GioHang/GioHang" class="icon-link cart-icon" title="Giỏ hàng">
                                <i class="fa-solid fa-cart-shopping"></i>
                                <span class="badge cart-count" id="headerCartCount">@_cartCount</span>
                            </a>
                            <!-- Cart Quick Preview Dropdown (Hover) -->
                            <div class="cart-quick-preview" id="cartQuickPreview">
                                <div class="cart-preview-header">
                                    <div class="cart-preview-title">
                                        <i class="fa-solid fa-shopping-bag"></i>
                                        <span>Giỏ hàng của bạn</span>
                                    </div>
                                    <span class="cart-items-badge" id="dropdownCartBadge">@_cartCount sản phẩm</span>
                                </div>
                                
                                <div class="cart-preview-items" id="cartPreviewItems">
                                    @if (_cart.Any())
                                    {
                                        @foreach (var item in _cart.Take(5))
                                        {
                                            <div class="cart-preview-item" data-product-id="@item.VatTuId">
                                                <div class="cart-item-thumb">
                                                    <img src="@(string.IsNullOrEmpty(item.HinhAnh) ? $"https://placehold.co/60x60?text={Uri.EscapeDataString(item.TenVatTu?.Substring(0, Math.Min(item.TenVatTu?.Length ?? 0, 8)) ?? "SP")}" : item.HinhAnh)" alt="@item.TenVatTu">
                                                </div>
                                                <div class="cart-item-details">
                                                    <h6 class="cart-item-name">@item.TenVatTu</h6>
                                                    <div class="cart-item-meta">
                                                        <span class="cart-item-price">@item.DonGia.ToString("N0")₫</span>
                                                        <span class="cart-item-qty">x@item.SoLuong</span>
                                                    </div>
                                                </div>
                                                <button class="btn-remove-cart-item" title="Xóa sản phẩm" onclick="removeFromDropdown(@item.VatTuId)">
                                                    <i class="fa-regular fa-trash-can"></i>
                                                </button>
                                            </div>
                                        }
                                        @if (_cart.Count > 5)
                                        {
                                            <div class="cart-preview-more">
                                                <span>+ @(_cart.Count - 5) sản phẩm khác...</span>
                                            </div>
                                        }
                                    }
                                    
                                    <!-- Empty State -->
                                    <div class="cart-preview-empty" style="@(_cart.Any() ? "display: none;" : "display: flex;")">
                                        <i class="fa-solid fa-cart-shopping"></i>
                                        <p>Giỏ hàng đang trống</p>
                                    </div>
                                </div>
                                
                                <div class="cart-preview-footer" style="@(_cart.Any() ? "" : "display: none;")">
                                    <div class="cart-preview-total">
                                        <span>Tạm tính:</span>
                                        <strong id="dropdownCartTotal">@_cartTotal.ToString("N0")₫</strong>
                                    </div>
                                    <div class="dropdown-actions">
                                        <a href="/GioHang/GioHang" class="btn-view-full-cart">
                                            <i class="fa-regular fa-eye"></i>
                                            Xem giỏ hàng
                                        </a>
                                        <a href="/ThanhToan/Checkout" class="btn-checkout">
                                            Thanh toán
                                            <i class="fa-solid fa-arrow-right"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>


                @if (!string.IsNullOrEmpty(Context.Session.GetString("UserName")))
                {
                    <div class="user-dropdown">
                        <a href="/Customer/Profile" class="user-info">
                            @{
                                var avatarUrl = Context.Session.GetString("AvatarUrl");
                                if (string.IsNullOrEmpty(avatarUrl))
                                {
                                    avatarUrl = $"https://ui-avatars.com/api/?name={Uri.EscapeDataString(Context.Session.GetString("UserName") ?? "User")}&background=0D8ABC&color=fff";
                                }
                            }
                            <img src="@avatarUrl" alt="Avatar" class="user-avatar" />
                            <div class="d-flex flex-column" style="line-height: 1.2;">
                                <span class="user-name">@Context.Session.GetString("UserName")</span>
                                <span style="font-size: 0.7em; opacity: 0.8; font-weight: normal;">Thành viên</span>
                            </div>
                            <i class="fas fa-chevron-down ms-2"></i>
                        </a>
                        <ul class="user-menu">
                            <li>
                                <div class="user-menu-header">
                                    <strong>@Context.Session.GetString("UserName")</strong>
                                    <small>@Context.Session.GetString("Email")</small>
                                </div>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a href="/Customer/Profile">
                                    <i class="fas fa-user-circle"></i>
                                    Thông tin tài khoản
                                </a>
                            </li>
                            <li>
                                <a href="/Customer/Orders">
                                    <i class="fas fa-box-open"></i>
                                    Đơn hàng của tôi
                                </a>
                            </li>

                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a href="/Account/Logout" class="text-danger">
                                    <i class="fas fa-sign-out-alt"></i>
                                    Đăng xuất
                                </a>
                            </li>
                        </ul>
                    </div>
                }
                else
                {
                    <div class="auth-buttons">
                        <a href="/Account/Login" class="btn-login">Đăng nhập</a>
                        <a href="/Account/Login?show=register" class="btn-register">Đăng ký</a>
                    </div>
                }
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="container">
            <ul class="nav-menu">
                <li class="nav-item"><a href="/" class="nav-link">Trang chủ</a></li>
                <li class="nav-item">
                    <a href="/SanPham" class="nav-link">
                        Danh mục <i class="fas fa-chevron-down ms-1" style="font-size: 0.8em;"></i>
                    </a>
                    <div class="dropdown-menu">
                        <a href="/SanPham" class="dropdown-item">Tất cả sản phẩm</a>
                        @if (_layoutCategories != null)
                        {
                            foreach (var cat in _layoutCategories)
                            {
                                <a href="/SanPham?loaiId=@cat.ID" class="dropdown-item">@cat.TenLoaiVatTu</a>
                            }
                        }
                    </div>
                </li>
                <li class="nav-item"><a href="/Customer/About" class="nav-link">Giới thiệu</a></li>
                <li class="nav-item"><a href="/Contact" class="nav-link">Liên hệ</a></li>
            </ul>
        </div>
    </div>
</header>

    <main role="main">
        @RenderBody()
    </main>
<footer class="main-footer">
    <div class="container">
        <div class="footer-top row">
            <!-- Cột liên hệ -->
            <div class="col-md-3 col-sm-6 mb-4">
                <h5 class="footer-title">Liên hệ</h5>
                <ul class="footer-links list-unstyled">
                    <li><i class="bi bi-clock me-2"></i>Liên hệ trong giờ làm việc</li>
                    <li><i class="bi bi-chat-dots me-2"></i>Zalo: 0302370432</li>
                    <li><i class="bi bi-envelope me-2"></i>Email: dainhtb01722@gmail.com</li>
                </ul>
            </div>
            
            <!-- Cột về chúng tôi -->
            <div class="col-md-3 col-sm-6 mb-4">
                <h5 class="footer-title">Về chúng tôi</h5>
                <ul class="footer-links list-unstyled">
                    <li><a href="#"><i class="bi bi-info-circle me-2"></i>Giới thiệu</a></li>
                    <li><a href="#"><i class="bi bi-telephone me-2"></i>Liên hệ</a></li>
                    <li><a href="#"><i class="bi bi-question-circle me-2"></i>FAQs</a></li>
                </ul>
            </div>
            
            <!-- Cột chính sách đại lý -->
            <div class="col-md-3 col-sm-6 mb-4">
                <h5 class="footer-title">📋 Chính sách đại lý</h5>
                <ul class="footer-links list-unstyled">
                    <li><a href="/ChinhSach"><i class="bi bi-book me-2"></i>Tổng quan chính sách</a></li>
                    <li><a href="/ChinhSach/ThanhToan"><i class="bi bi-cash-coin me-2"></i>Thanh toán & Đặt cọc</a></li>
                    <li><a href="/ChinhSach/GiaoHang"><i class="bi bi-truck me-2"></i>Vận chuyển hàng hóa</a></li>
                    <li><a href="/ChinhSach/DoiTra"><i class="bi bi-arrow-repeat me-2"></i>Đổi trả & Hoàn tiền</a></li>
                    <li><a href="/ChinhSach/BaoHanh"><i class="bi bi-shield-check me-2"></i>Bảo hành sản phẩm</a></li>
                </ul>
            </div>
            
            <!-- Cột hợp tác & hỗ trợ -->
            <div class="col-md-3 col-sm-6 mb-4">
                <h5 class="footer-title">🤝 Hợp tác</h5>
                <ul class="footer-links list-unstyled">
                    <li><a href="#"><i class="bi bi-person-plus me-2"></i>Tuyển dụng</a></li>
                    <li><a href="#"><i class="bi bi-shop me-2"></i>Đăng ký đại lý</a></li>
                    <li><a href="#"><i class="bi bi-headset me-2"></i>Hotline: 1900 xxxx</a></li>
                </ul>
            </div>
        </div>
        
        <!-- Dòng bên dưới với bản quyền và mạng xã hội -->
        <div class="footer-bottom border-top border-secondary pt-4 mt-4">
            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="mb-0">&copy; 2025 Furniture Store. Tất cả quyền được bảo lưu.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <div class="social-icons">
                        <a href="#" class="btn btn-outline-light btn-sm me-2">
                            <i class="bi bi-facebook me-1"></i>Facebook
                        </a>
                        <a href="#" class="btn btn-outline-light btn-sm me-2">
                            <i class="bi bi-instagram me-1"></i>Instagram
                        </a>
                        <a href="#" class="btn btn-outline-light btn-sm">
                            <i class="bi bi-chat-dots me-1"></i>Zalo
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

    <!-- Global Message Modal -->
    <div class="modal fade" id="globalMessageModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title fw-bold" id="globalMessageTitle">Thông báo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center py-4">
                    <div class="mb-3">
                        <i class="fas fa-info-circle text-primary" style="font-size: 3rem;" id="globalMessageIcon"></i>
                    </div>
                    <p id="globalMessageContent" class="fs-5">Nội dung thông báo</p>
                </div>
                <div class="modal-footer border-0 justify-content-center">
                    <button type="button" class="btn btn-primary px-4 rounded-pill" data-bs-dismiss="modal">Đóng</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Global Confirm Modal -->
    <div class="modal fade" id="globalConfirmModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title fw-bold" id="globalConfirmTitle">Xác nhận</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center py-4">
                    <div class="mb-3">
                        <i class="fas fa-question-circle text-warning" style="font-size: 3rem;"></i>
                    </div>
                    <p id="globalConfirmContent" class="fs-5">Bạn có chắc chắn muốn thực hiện?</p>
                </div>
                <div class="modal-footer border-0 justify-content-center">
                    <button type="button" class="btn btn-secondary px-4 rounded-pill" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-danger px-4 rounded-pill" id="globalConfirmBtn">Đồng ý</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Fix paths based on actual structure if needed or remove query string for now if it causes issues -->
    <script src="/user/lib/jquery/dist/jquery.min.js"></script>
    <script src="/user/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/user/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
    @await RenderSectionAsync("Styles", required: false)
    <script>
        // Global variables for Modals
        var confirmCallback = null;
        var messageModal = null;
        var confirmModal = null;

        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const menuToggle = document.getElementById('mobileMenuToggle');
            if (menuToggle) {
                menuToggle.addEventListener('click', function() {
                    const nav = document.getElementById('mainNav');
                    if (nav) nav.classList.toggle('active');
                });
            }

            // Search functionality
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.trim();
                    const suggestions = document.getElementById('searchSuggestions');
                    if (suggestions) {
                        if (searchTerm.length > 2) {
                            suggestions.style.display = 'block';
                        } else {
                            suggestions.style.display = 'none';
                        }
                    }
                });
            }
            
            // User dropdown
            document.querySelectorAll('.user-dropdown').forEach(dropdown => {
                const toggle = dropdown.querySelector('.user-info');
                const menu = dropdown.querySelector('.user-menu');
                if (toggle && menu) {
                    toggle.addEventListener('click', function(e) {
                        e.preventDefault();
                        menu.classList.toggle('show');
                    });
                }
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                document.querySelectorAll('.user-dropdown').forEach(dropdown => {
                     const menu = dropdown.querySelector('.user-menu');
                     if (menu && !dropdown.contains(e.target)) {
                         menu.classList.remove('show');
                     }
                });
            });

            // Initialize Modals
            const msgEl = document.getElementById('globalMessageModal');
            if (msgEl) messageModal = new bootstrap.Modal(msgEl);

            const confirmEl = document.getElementById('globalConfirmModal');
            if (confirmEl) confirmModal = new bootstrap.Modal(confirmEl);

            // Confirm Button Listener
            const confirmBtn = document.getElementById('globalConfirmBtn');
            if (confirmBtn) {
                confirmBtn.addEventListener('click', function() {
                    if (confirmCallback) {
                        confirmCallback();
                    }
                    if (confirmModal) confirmModal.hide();
                });
            }

            // Quick cart preview
            const cartIcon = document.querySelector('.cart-icon');
            if(cartIcon) {
                 cartIcon.addEventListener('mouseenter', function() {
                    // Preview logic
                });
            }
        });

        // Global Helper Functions attached to window
        window.showGlobalMessage = function(message, title = "Thông báo", type = "info") {
            const contentEl = document.getElementById('globalMessageContent');
            const titleEl = document.getElementById('globalMessageTitle');
            const iconEl = document.getElementById('globalMessageIcon');
            
            if (contentEl) contentEl.innerText = message;
            if (titleEl) titleEl.innerText = title;
            
            if (iconEl) {
                iconEl.className = ''; // Reset
                if (type === 'success') {
                    iconEl.className = 'fas fa-check-circle text-success';
                    iconEl.style.fontSize = '3rem';
                } else if (type === 'error') {
                    iconEl.className = 'fas fa-times-circle text-danger';
                    iconEl.style.fontSize = '3rem';
                } else {
                    iconEl.className = 'fas fa-info-circle text-primary';
                    iconEl.style.fontSize = '3rem';
                }
            }
            
            if (messageModal) messageModal.show();
        };

        window.showGlobalConfirm = function(message, callback) {
            const contentEl = document.getElementById('globalConfirmContent');
            if (contentEl) contentEl.innerText = message;
            
            confirmCallback = callback;
            
            if (confirmModal) confirmModal.show();
        };

        function updateCartCount(count) {
            document.querySelectorAll('.cart-count').forEach(el => {
                el.textContent = count;
            });
            const badge = document.getElementById('dropdownCartBadge');
            if (badge) badge.textContent = count + ' sản phẩm';
        }

        function updateCartTotal(total) {
            const el = document.getElementById('dropdownCartTotal');
            if (el) el.textContent = total.toLocaleString('vi-VN') + '₫';
        }

        // Add to cart globally available function
        window.addToCart = function(productId, quantity = 1) {
            $.post('/GioHang/AddToCart', { productId, quantity }, function(res) {
                if (res.success) {
                    updateCartCount(res.cartCount);
                    updateCartTotal(res.cartTotal);
                    showCartToast(res.message);
                    // Reload dropdown after adding
                    refreshCartDropdown();
                } else {
                    showGlobalMessage(res.message, 'Lỗi', 'error');
                }
            }).fail(function() {
                showGlobalMessage('Có lỗi xảy ra. Vui lòng thử lại.', 'Lỗi', 'error');
            });
        };

        // Remove from dropdown
        window.removeFromDropdown = function(productId) {
            $.post('/GioHang/RemoveFromCart', { productId }, function(res) {
                if (res.success) {
                    updateCartCount(res.cartCount);
                    updateCartTotal(res.cartTotal);
                    // Remove item from DOM
                    const item = document.querySelector(`[data-product-id="${productId}"]`);
                    if (item) item.remove();
                    // Check if cart is now empty
                    if (res.cartCount === 0) {
                        document.querySelector('.cart-preview-empty').style.display = 'flex';
                        document.querySelector('.cart-preview-footer').style.display = 'none';
                    }
                    showCartToast(res.message);
                }
            });
        };

        // Refresh cart dropdown via AJAX
        window.refreshCartDropdown = function() {
            $.get('/GioHang/GetCartData', function(res) {
                if (res.success) {
                    updateCartCount(res.cartCount);
                    updateCartTotal(res.cartTotal);
                    
                    // Update dropdown items with full DOM rebuild
                    const container = document.getElementById('cartPreviewItems');
                    const footer = document.querySelector('.cart-preview-footer');
                    const emptyState = document.querySelector('.cart-preview-empty');
                    
                    if (container && res.items && res.items.length > 0) {
                        let html = '';
                        const itemsToShow = res.items.slice(0, 5);
                        
                        itemsToShow.forEach(item => {
                            const imgSrc = item.hinhAnh || `https://placehold.co/60x60?text=${encodeURIComponent(item.tenVatTu?.substring(0, 8) || 'SP')}`;
                            html += `
                            <div class="cart-preview-item" data-product-id="${item.vatTuId}">
                                <div class="cart-item-thumb">
                                    <img src="${imgSrc}" alt="${item.tenVatTu}">
                                </div>
                                <div class="cart-item-details">
                                    <h6 class="cart-item-name">${item.tenVatTu}</h6>
                                    <div class="cart-item-meta">
                                        <span class="cart-item-price">${item.donGia.toLocaleString('vi-VN')}₫</span>
                                        <span class="cart-item-qty">x${item.soLuong}</span>
                                    </div>
                                </div>
                                <button class="btn-remove-cart-item" title="Xóa sản phẩm" onclick="removeFromDropdown(${item.vatTuId})">
                                    <i class="fa-regular fa-trash-can"></i>
                                </button>
                            </div>`;
                        });
                        
                        // Add "more items" indicator if needed
                        if (res.items.length > 5) {
                            html += `<div class="cart-preview-more"><span>+ ${res.items.length - 5} sản phẩm khác...</span></div>`;
                        }
                        
                        container.innerHTML = html;
                        if (emptyState) emptyState.style.display = 'none';
                        if (footer) footer.style.display = '';
                    } else if (container) {
                        container.innerHTML = '';
                        if (emptyState) emptyState.style.display = 'flex';
                        if (footer) footer.style.display = 'none';
                    }
                    
                    // Update badge in header
                    const badge = document.getElementById('headerCartCount');
                    if (badge) badge.textContent = res.cartCount + ' sản phẩm';
                }
            });
        };

        // Cart toast notification
        function showCartToast(message) {
            // Create or update toast
            let toast = document.getElementById('cartActionToast');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'cartActionToast';
                toast.className = 'cart-action-toast';
                toast.innerHTML = `<i class="fa-solid fa-check-circle"></i><span class="toast-text"></span>`;
                document.body.appendChild(toast);
                
                // Add styles if not exists
                if (!document.getElementById('cartToastStyles')) {
                    const style = document.createElement('style');
                    style.id = 'cartToastStyles';
                    style.textContent = `
                        .cart-action-toast {
                            position: fixed; bottom: 20px; right: 20px; background: linear-gradient(135deg, #28a745, #20c997);
                            color: white; padding: 12px 24px; border-radius: 10px; display: flex; align-items: center; gap: 10px;
                            box-shadow: 0 4px 20px rgba(40,167,69,0.4); z-index: 10000; transform: translateX(150%); transition: transform 0.3s ease;
                        }
                        .cart-action-toast.show { transform: translateX(0); }
                        .cart-action-toast i { font-size: 1.2rem; }
                    `;
                    document.head.appendChild(style);
                }
            }
            toast.querySelector('.toast-text').textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
    <script>
        // Global Wishlist Function
        window.addToWishlist = function(productId) {
            $.post('/GioHang/AddToWishlist', { productId }, function(res) {
                 if (res.success) {
                    // Update header wishlist badge if it exists
                    const wishlistBadge = document.querySelector('.icon-btn .badge-count');
                    if(wishlistBadge) {
                        wishlistBadge.textContent = res.count;
                        wishlistBadge.style.animation = 'none';
                        setTimeout(() => { wishlistBadge.style.animation = 'pulse 0.5s ease'; }, 10);
                    }
                    showCartToast(res.message); // Reuse the toast
                } else {
                    showGlobalMessage(res.message, 'Thông báo', 'info');
                }
            }).fail(function() {
                showGlobalMessage('Có lỗi xảy ra. Vui lòng thử lại.', 'Lỗi', 'error');
            });
        };
    </script>
</body>
</html>